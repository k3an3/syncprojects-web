{% extends 'registration/base.html' %}
{% load static %}
{% block title %}Syncprojects Client Authorization{% endblock %}
{% block content %}
    <main class="form-signin">
        <img class="mb-4" src="{% static 'img/syncprojects.png' %}" alt="Syncprojects"/>
        <p>Logging you in...</p>
    </main>
    <script src="{% static 'sync/sync.js' %}"></script>
    <script>
        async function doLogin() {
            await localRequest('auth', 'POST', {'data': "{{ auth_data }}"}).then(_ => {
                window.location.href = "{% url 'sync:client-login-success' %}";
            }).catch(error => {
                alert("Oops! Something went wrong; try again?");
                console.log(error);
            });
        }

        doLogin();
    </script>
    {# <script src="{% static 'sync/auth.js' %}"></script> #}
{% endblock %}